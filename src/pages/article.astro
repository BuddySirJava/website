---
import BaseLayout from "@layouts/BaseLayout.astro";
---

<BaseLayout>
    <main class="container" style="padding-top: var(--spacing-xl);" x-data="alpineData.singleArticle()" x-init="init()">
        <div x-show="loading" class="text-center">
            <p>در حال بارگذاری...</p>
        </div>

        <div x-show="error" class="text-center">
            <h1>مقاله یافت نشد</h1>
            <a href="articles.astro" class="btn btn-primary mt-md">بازگشت به مقالات</a>
        </div>

        <article x-show="!loading && !error && article">
            <header class="mb-xl">
                <a href="articles.astro" class="btn btn-secondary mb-md">← بازگشت به مقالات</a>
                <h1 x-text="article?.title" class="section-title mb-sm"></h1>
                <div class="article-meta" style="font-size: var(--font-size-lg);">
                    <span x-text="article?.author"></span>
                    <span>•</span>
                    <span x-text="article?.persianDate"></span>
                </div>
                <div x-show="article?.tags" class="mt-md">
                    <template x-for="tag in article?.tags" :key="tag">
                        <span class="tag" x-text="tag"></span>
                    </template>
                </div>
            </header>

            <div class="card card-large">
                <div x-html="content" style="line-height: var(--line-height-relaxed);"></div>
            </div>
        </article>
    </main>
</BaseLayout>